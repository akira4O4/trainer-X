#Default setting--------------------------------------------------------------------------------------------------------
mode: predict           #train or predict
#task: classification #classification segmentation multitask
task: segmentation
#task: multitask
project: project/temp
experiment: 'exp'

#Train setting----------------------------------------------------------------------------------------------------------
seed: 0
topk: [ 1,2 ]
device: 0 #-1=cpu
epochs: 500
workers: 0
not_val: False
#model: shufflenet_v2_x1_0
model: segmentation_shufflenetplus_v2_x1_0
#model: multi_task_shufflenetplus_v2_x1_0
pretrained: True
weight: model.pth
wh: [ 256,256 ]
amp: True
cache: True
deterministic: True
save_period: 100 # (int) Save checkpoint every x epochs

# Classification--------------------------------------------------------------------------------------------------------
classification:
  batch: 64
  classes: 2
  train: D:\llf\dataset\dog_cat\64\train
  val: D:\llf\dataset\dog_cat\64\train

# Segmentation----------------------------------------------------------------------------------------------------------
segmentation:
  batch: 8
  classes: 5 # Not add background
  train: D:\llf\dataset\danyang\training_data\F\train\8\train
  val: D:\llf\dataset\danyang\training_data\F\train\8\train

#Hyperparameters--------------------------------------------------------------------------------------------------------
optimizer: auto
cos_lr: False
lr0: 0.001                        # (float) initial learning rate
lrf: 0.01                         # (float) final learning rate (lr0 * lrf)
momentum: 0.937
alpha: auto                       #focal_loss
gamma: 2                          #focal_loss
smooth: 1.0                       # seg loss
loss_sum_weights: [ 1,1 ]         # cls_loss + seg_loss
seg_loss_sum_weights: [ 1,1,0 ]   # bce + dice + iou

#Predict setting-----------------------------------------------------------------------------------------------------------
source: D:\llf\dataset\danyang\training_data\F\one
test_weight: D:\llf\code\xTrainer\project\F.pth

cls_thr: [ 0.6,0.6 ]
cls_label: D:\llf\code\xTrainer\project\cls_label.yaml

seg_thr: [ 10,10,-1,-1,-1 ] #Not add background (-1==ignore)
seg_label: D:\llf\code\xTrainer\project\seg_label.yaml
sum_method: False #segment only

# MlFlow setting--------------------------------------------------------------------------------------------------------
mlflow_uri: -1 #-1=disable
mlflow_port: 5000
mlflow_experiment_name: classification
